<div class="taches-container">

  <app-toast></app-toast>

  <!-- ğŸ”™ Bouton retour -->
  <button class="btn-back" (click)="goBack()">â† Retour</button>

  <h3>â• CrÃ©er une nouvelle tÃ¢che</h3>

  <form class="add-tache-form" (ngSubmit)="addTache()">

    <!-- Titre -->
    <input type="text" [(ngModel)]="newTache.titre" name="titre" placeholder="Titre" required>

    <!-- Contenu -->
    <label for="contenu">Contenu</label>
    <kendo-editor
      [(ngModel)]="newTache.contenu"
      name="contenu"
      [resizable]="true"
      style="height: 300px;"
      required>
    </kendo-editor>

    <!-- AperÃ§u -->
    <div class="tache-preview">
      <h4>ğŸ‘€ AperÃ§u</h4>
      <div class="preview-box" [innerHTML]="newTache.contenu"></div>
    </div>

    <!-- Ã‰quipe readonly -->
    <input type="text" [(ngModel)]="newTache.equipe" name="equipe" placeholder="Ã‰quipe" readonly>

    <!-- CatÃ©gorie -->
    <select [(ngModel)]="newTache.categorie" name="categorie" required>
      <option value="" disabled selected>-- Choisir une catÃ©gorie --</option>
      <option value="Technique">Technique</option>
      <option value="RH">Ressources humaines</option>
      <option value="Administration">Administration</option>
      <option value="Autre">Autre</option>
    </select>

    <!-- PrioritÃ© -->
    <select [(ngModel)]="newTache.priorite" name="priorite" required>
      <option value="" disabled selected>-- Choisir la prioritÃ© --</option>
      <option value="basse">Basse</option>
      <option value="moyenne">Moyenne</option>
      <option value="haute">Haute</option>
    </select>

    <!-- Upload fichiers -->
    <input type="file" (change)="handleFileInput($event)" multiple>

    <!-- Liste des fichiers sÃ©lectionnÃ©s -->
    <div *ngIf="newFiles.length > 0" class="selected-files">
      <p>ğŸ“ Fichiers sÃ©lectionnÃ©s :</p>
      <ul>
        <li *ngFor="let f of newFiles; let i = index">
          {{ f.name }}
          <button type="button" class="remove-file-btn" (click)="removeFile(i)">âŒ</button>
        </li>
      </ul>
    </div>

    <!-- Bouton Ajouter -->
    <button type="submit" [disabled]="isSubmitting">CrÃ©er la tÃ¢che</button>

  </form>
</div>
